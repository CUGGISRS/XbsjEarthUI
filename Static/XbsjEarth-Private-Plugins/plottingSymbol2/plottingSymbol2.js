!function(e){var t=window.webpackHotUpdate;window.webpackHotUpdate=function(e,i){!function(e,t){if(!w[e]||!C[e])return;for(var i in C[e]=!1,t)Object.prototype.hasOwnProperty.call(t,i)&&(u[i]=t[i]);0==--g&&0===S&&x()}(e,i),t&&t(e,i)};var i,s=!0,r="b3aff2c51d0f036333f7",o={},a=[],n=[];function l(e){var t=I[e];if(!t)return T;var s=function(s){return t.hot.active?(I[s]?-1===I[s].parents.indexOf(e)&&I[s].parents.push(e):(a=[e],i=s),-1===t.children.indexOf(s)&&t.children.push(s)):(console.warn("[HMR] unexpected require("+s+") from disposed module "+e),a=[]),T(s)},r=function(e){return{configurable:!0,enumerable:!0,get:function(){return T[e]},set:function(t){T[e]=t}}};for(var o in T)Object.prototype.hasOwnProperty.call(T,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(s,o,r(o));return s.e=function(e){return"ready"===p&&d("prepare"),S++,T.e(e).then(t,(function(e){throw t(),e}));function t(){S--,"prepare"===p&&(_[e]||P(e),0===S&&0===g&&x())}},s.t=function(e,t){return 1&t&&(e=s(e)),T.t(e,-2&t)},s}function h(t){var s={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:i!==t,active:!0,accept:function(e,t){if(void 0===e)s._selfAccepted=!0;else if("function"==typeof e)s._selfAccepted=e;else if("object"==typeof e)for(var i=0;i<e.length;i++)s._acceptedDependencies[e[i]]=t||function(){};else s._acceptedDependencies[e]=t||function(){}},decline:function(e){if(void 0===e)s._selfDeclined=!0;else if("object"==typeof e)for(var t=0;t<e.length;t++)s._declinedDependencies[e[t]]=!0;else s._declinedDependencies[e]=!0},dispose:function(e){s._disposeHandlers.push(e)},addDisposeHandler:function(e){s._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=s._disposeHandlers.indexOf(e);t>=0&&s._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,p){case"idle":(u={})[t]=e[t],d("ready");break;case"ready":O(t);break;case"prepare":case"check":case"dispose":case"apply":(y=y||[]).push(t)}},check:M,apply:E,status:function(e){if(!e)return p;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);t>=0&&c.splice(t,1)},data:o[t]};return i=void 0,s}var c=[],p="idle";function d(e){p=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}var m,u,f,y,g=0,S=0,_={},C={},w={};function v(e){return+e+""===e?+e:e}function M(e){if("idle"!==p)throw new Error("check() is only allowed in idle status");return s=e,d("check"),(t=1e4,t=t||1e4,new Promise((function(e,i){if("undefined"==typeof XMLHttpRequest)return i(new Error("No browser support"));try{var s=new XMLHttpRequest,o=T.p+""+r+".hot-update.json";s.open("GET",o,!0),s.timeout=t,s.send(null)}catch(e){return i(e)}s.onreadystatechange=function(){if(4===s.readyState)if(0===s.status)i(new Error("Manifest request to "+o+" timed out."));else if(404===s.status)e();else if(200!==s.status&&304!==s.status)i(new Error("Manifest request to "+o+" failed."));else{try{var t=JSON.parse(s.responseText)}catch(e){return void i(e)}e(t)}}}))).then((function(e){if(!e)return d(b()?"ready":"idle"),null;C={},_={},w=e.c,f=e.h,d("prepare");var t=new Promise((function(e,t){m={resolve:e,reject:t}}));u={};return P(0),"prepare"===p&&0===S&&0===g&&x(),t}));var t}function P(e){w[e]?(C[e]=!0,g++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=T.p+""+e+"."+r+".hot-update.js",document.head.appendChild(t)}(e)):_[e]=!0}function x(){d("ready");var e=m;if(m=null,e)if(s)Promise.resolve().then((function(){return E(s)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var i in u)Object.prototype.hasOwnProperty.call(u,i)&&t.push(v(i));e.resolve(t)}}function E(t){if("ready"!==p)throw new Error("apply() is only allowed in ready status");return function t(s){var n,l,h,c,p;function m(e){for(var t=[e],i={},s=t.map((function(e){return{chain:[e],id:e}}));s.length>0;){var r=s.pop(),o=r.id,a=r.chain;if((c=I[o])&&(!c.hot._selfAccepted||c.hot._selfInvalidated)){if(c.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:o};if(c.hot._main)return{type:"unaccepted",chain:a,moduleId:o};for(var n=0;n<c.parents.length;n++){var l=c.parents[n],h=I[l];if(h){if(h.hot._declinedDependencies[o])return{type:"declined",chain:a.concat([l]),moduleId:o,parentId:l};-1===t.indexOf(l)&&(h.hot._acceptedDependencies[o]?(i[l]||(i[l]=[]),g(i[l],[o])):(delete i[l],t.push(l),s.push({chain:a.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:i}}function g(e,t){for(var i=0;i<t.length;i++){var s=t[i];-1===e.indexOf(s)&&e.push(s)}}b();var S={},_=[],C={},M=function(){console.warn("[HMR] unexpected require("+x.moduleId+") to disposed module")};for(var P in u)if(Object.prototype.hasOwnProperty.call(u,P)){var x;p=v(P),x=u[P]?m(p):{type:"disposed",moduleId:P};var E=!1,O=!1,j=!1,V="";switch(x.chain&&(V="\nUpdate propagation: "+x.chain.join(" -> ")),x.type){case"self-declined":s.onDeclined&&s.onDeclined(x),s.ignoreDeclined||(E=new Error("Aborted because of self decline: "+x.moduleId+V));break;case"declined":s.onDeclined&&s.onDeclined(x),s.ignoreDeclined||(E=new Error("Aborted because of declined dependency: "+x.moduleId+" in "+x.parentId+V));break;case"unaccepted":s.onUnaccepted&&s.onUnaccepted(x),s.ignoreUnaccepted||(E=new Error("Aborted because "+p+" is not accepted"+V));break;case"accepted":s.onAccepted&&s.onAccepted(x),O=!0;break;case"disposed":s.onDisposed&&s.onDisposed(x),j=!0;break;default:throw new Error("Unexception type "+x.type)}if(E)return d("abort"),Promise.reject(E);if(O)for(p in C[p]=u[p],g(_,x.outdatedModules),x.outdatedDependencies)Object.prototype.hasOwnProperty.call(x.outdatedDependencies,p)&&(S[p]||(S[p]=[]),g(S[p],x.outdatedDependencies[p]));j&&(g(_,[x.moduleId]),C[p]=M)}var X,L=[];for(l=0;l<_.length;l++)p=_[l],I[p]&&I[p].hot._selfAccepted&&C[p]!==M&&!I[p].hot._selfInvalidated&&L.push({module:p,parents:I[p].parents.slice(),errorHandler:I[p].hot._selfAccepted});d("dispose"),Object.keys(w).forEach((function(e){!1===w[e]&&function(e){delete installedChunks[e]}(e)}));var z,R,W=_.slice();for(;W.length>0;)if(p=W.pop(),c=I[p]){var k={},D=c.hot._disposeHandlers;for(h=0;h<D.length;h++)(n=D[h])(k);for(o[p]=k,c.hot.active=!1,delete I[p],delete S[p],h=0;h<c.children.length;h++){var H=I[c.children[h]];H&&((X=H.parents.indexOf(p))>=0&&H.parents.splice(X,1))}}for(p in S)if(Object.prototype.hasOwnProperty.call(S,p)&&(c=I[p]))for(R=S[p],h=0;h<R.length;h++)z=R[h],(X=c.children.indexOf(z))>=0&&c.children.splice(X,1);d("apply"),void 0!==f&&(r=f,f=void 0);for(p in u=void 0,C)Object.prototype.hasOwnProperty.call(C,p)&&(e[p]=C[p]);var A=null;for(p in S)if(Object.prototype.hasOwnProperty.call(S,p)&&(c=I[p])){R=S[p];var N=[];for(l=0;l<R.length;l++)if(z=R[l],n=c.hot._acceptedDependencies[z]){if(-1!==N.indexOf(n))continue;N.push(n)}for(l=0;l<N.length;l++){n=N[l];try{n(R)}catch(e){s.onErrored&&s.onErrored({type:"accept-errored",moduleId:p,dependencyId:R[l],error:e}),s.ignoreErrored||A||(A=e)}}}for(l=0;l<L.length;l++){var U=L[l];p=U.module,a=U.parents,i=p;try{T(p)}catch(e){if("function"==typeof U.errorHandler)try{U.errorHandler(e)}catch(t){s.onErrored&&s.onErrored({type:"self-accept-error-handler-errored",moduleId:p,error:t,originalError:e}),s.ignoreErrored||A||(A=t),A||(A=e)}else s.onErrored&&s.onErrored({type:"self-accept-errored",moduleId:p,error:e}),s.ignoreErrored||A||(A=e)}}if(A)return d("fail"),Promise.reject(A);if(y)return t(s).then((function(e){return _.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e}));return d("idle"),new Promise((function(e){e(_)}))}(t=t||{})}function b(){if(y)return u||(u={}),y.forEach(O),y=void 0,!0}function O(t){Object.prototype.hasOwnProperty.call(u,t)||(u[t]=e[t])}var I={};function T(t){if(I[t])return I[t].exports;var i=I[t]={i:t,l:!1,exports:{},hot:h(t),parents:(n=a,a=[],n),children:[]};return e[t].call(i.exports,i,i.exports,l(t)),i.l=!0,i.exports}T.m=e,T.c=I,T.d=function(e,t,i){T.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},T.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},T.t=function(e,t){if(1&t&&(e=T(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(T.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)T.d(i,s,function(t){return e[t]}.bind(null,s));return i},T.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return T.d(t,"a",t),t},T.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},T.p="",T.h=function(){return r},l(0)(T.s=0)}([function(e,t,i){"use strict";i.r(t);class s extends XE.Obj.PlotBase{constructor(e,t){super(e,t),this._onlyMove=!1,this._fixedPositionsNum=void 0,XE.MVVM.extend(this,{_polygonShow:!0}),this._polygon=new XE.Obj.Polygon(e),this.disposers.push(()=>{this._polygon=this._polygon&&this._polygon.destroy()}),this._polygon.show=this._polygonShow&&this.show,XE.Earth.Interaction.Picking.registerPickingParent(this._polygon,this);const i=()=>{this._polygon.show=this._polygonShow&&this.show,this._polygon.width=this.width,this._polygon.color=this.color,this._polygon.ground=this.ground,this._polygon.outline.width=this.outlineWidth,this._polygon.outline.color=this.outlineColor,this._polygon.outline.show=this.outlineShow,this._polygon.depthTest=this.depthTest};i(),this.disposers.push(XE.MVVM.watch(()=>({show:this._polygonShow&&this.show,width:this.width,color:[...this.color],ground:this.ground,outlineWidth:this.outlineWidth,outlineColor:this.outlineColor,outlineShow:this.outlineShow,depthTest:this.depthTest}),()=>i()))}get onlyMove(){return this._onlyMove}get fixedPositionsNum(){return this._fixedPositionsNum}flyTo(){this._polygon.flyTo()}}s.defaultOptions={positions:[],show:!0,color:[0,1,0,.1],outlineWidth:2,outlineColor:[0,1,0,1],outlineShow:!0,depthTest:!1};var r=s;const o=XE.Tool;class a extends r{constructor(e,t){super(e,t),this._onlyMove=!0,this._polygonPositions=[],this.disposers.push(XE.MVVM.watch(()=>({minWidthScale:this.minWidthScale,dynamicWidthScale:this.dynamicWidthScale,arrowMaxHeightScale:this.arrowMaxHeightScale,arrowWingWidthScale:this.arrowWingWidthScale}),()=>{this.change(this.positions,this.minWidthScale,this.dynamicWidthScale,this.arrowMaxHeightScale,this.arrowWingWidthScale)})),this.disposers.push(XE.MVVM.watch(()=>[...this.positions.map(e=>[...e])],()=>{this.change(this.positions,this.minWidthScale,this.dynamicWidthScale,this.arrowMaxHeightScale,this.arrowWingWidthScale)}))}change(e,t=.06,i=.1,s=.1,r=2){let a=[...e];const n=a.length;if(n<2||h(a[n-1],a[n-2]))return;console.clear=function(){};let l=a.map(e=>Cesium.Cartesian3.fromRadians(...e,null,new Cesium.Cartesian3));this._polygonPositions.length=0;let c,p,d,m,u,f,y,g=[0,0,0],S=new Array(n).fill(0).map((e,t)=>(c=a[t-1],p=a[t+1],d=a[t],m=c?o.Math.hpr(d,c,g)[0]:0,u=p?o.Math.hpr(d,p,g)[0]:0,f=m&&u?2:1,y=(m+u)/f,y=m>u?y:y-Cesium.Math.PI,y<0?y+Cesium.Math.TWO_PI:y)),_=0,C=[];l.forEach((e,t)=>{c=l[t-1]||e,p=e,_+=Cesium.Cartesian3.distance(c,p),C.push(_)}),C=C.map(e=>_-e);const w=(i/=2)*_,v=(t/=2)*_;let M=new Array(C.length).fill(0).map((e,t)=>v+w*C[t]/_),P=function(e,t,i,s,r,a){let n=e*t,l=.7*n,h=Cesium.Cartesian3.distance(r[0],r[1]);h<l&&(l=h,n=l/.7);let c=o.Math.hpr(a[1],a[0],[0,0,0])[0],p=o.Math.geoMove(a[1],c,l,[0,0,0]),d=o.Math.geoMove(a[1],c,n,[0,0,0]),m=o.Math.hpr(p,a[1],[0,0,0])[0],u=o.Math.hpr(d,a[1],[0,0,0])[0],f=new Array(5);return f[0]=o.Math.geoMove(p,m-Cesium.Math.PI_OVER_TWO,i,[0,0,0]),f[4]=o.Math.geoMove(p,m+Cesium.Math.PI_OVER_TWO,i,[0,0,0]),f[1]=o.Math.geoMove(d,u-Cesium.Math.PI_OVER_TWO,i*s,[0,0,0]),f[3]=o.Math.geoMove(d,u+Cesium.Math.PI_OVER_TWO,i*s,[0,0,0]),f[2]=[...a[1]],f}(_,s,v,r,l.slice(-2),a.slice(-2)),x=[],E=[];a.forEach((e,t)=>{0==t||t==n-1?(x.push(o.Math.geoMove(e,S[t]+Cesium.Math.PI_OVER_TWO,M[t])),E.push(o.Math.geoMove(e,S[t]-Cesium.Math.PI_OVER_TWO,M[t]))):(x.push(o.Math.geoMove(e,S[t]-Cesium.Math.PI,M[t])),E.push(o.Math.geoMove(e,S[t],M[t])))}),x.pop(),E.pop(),x.push(P[0]),E.push(P[P.length-1]);let b=o.Math.interpolatePositions(x,20*n,!1,[]),O=o.Math.interpolatePositions(E,20*n,!1,[]);b.forEach(e=>{this._polygonPositions.push(e[0],e[1])}),P.forEach(e=>{this._polygonPositions.push(e[0],e[1])});for(let e=O.length-1;e>=0;e--)this._polygonPositions.push(O[e][0],O[e][1]);this._polygon.positions=this._polygonPositions,this._polygon.height=0,this._polygonShow=!0}}a.registerType(a,"GeoArrow"),a.defaultOptions={minWidthScale:.06,dynamicWidthScale:.1,arrowMaxHeightScale:.1,arrowWingWidthScale:2};var n=a;let l;function h(e,t){if(!e||!t)return!1;l=0;for(let i=0;i<e.length;i++)if(l=e[i]==t[i]?0:1,l>0)return!1;return!0}let c=new Cesium.Cartesian3;XE.Tool;class p extends XE.Core.XbsjCzmObj{constructor(e,t){super(e,t),this.disposers.push(XE.Earth.Interaction.InteractionProperty.registerPositionEditing(this._earth,this,{positionEditingProperty:"positionEditing"})),this.disposers.push(XE.Earth.Interaction.InteractionProperty.registerPositionPicking(this._earth,this,{positionPickingProperty:"creating"})),this.disposers.push(XE.Earth.Interaction.InteractionProperty.registerRotationEditing(this._earth,this,{rotationEditingProperty:"rotationEditing"})),this._viewer=e.czm.viewer;let i=new Cesium.Cartesian3;Cesium.Cartesian3.fromRadians(...this.position,null,i),this._modelMatrix=Cesium.Transforms.eastNorthUpToFixedFrame(i),this._updateCallback=()=>{},this._particleSystem=new Cesium.ParticleSystem({image:this.image,startColor:Cesium.Color.LIGHTSEAGREEN.withAlpha(.7),endColor:Cesium.Color.WHITE.withAlpha(0),startScale:this.startScale,endScale:this.endScale,minimumParticleLife:this.minimumParticleLife,maximumParticleLife:this.maximumParticleLife,minimumSpeed:this.minimumSpeed,maximumSpeed:this.maximumSpeed,imageSize:new Cesium.Cartesian2(this.particleSize,this.particleSize),emissionRate:this.emissionRate,lifetime:16,modelMatrix:this._modelMatrix,emitterModelMatrix:Cesium.Matrix4.IDENTITY,emitter:new Cesium.CircleEmitter(2),updateCallback:this._updateCallback}),this._viewer.scene.primitives.add(this._particleSystem),this.disposers.push(XE.MVVM.watch(()=>({startColor:[...this.startColor],endColor:[...this.endColor],image:this.image,emissionRate:this.emissionRate,maximumSpeed:this.maximumSpeed,minimumSpeed:this.minimumSpeed,minimumImageSize:this.minimumImageSize,maximumImageSize:this.maximumImageSize,minimumParticleLife:this.minimumParticleLife,maximumParticleLife:this.maximumParticleLife}),()=>this.update())),this.disposers.push(XE.MVVM.watch(()=>({image:this.image}),()=>this.updateParticleSystem())),this.disposers.push(XE.MVVM.watch(()=>({particleSize:this.particleSize}),()=>this.updateParticleSize())),this.disposers.push(XE.MVVM.watch(()=>[...this.position,...this.rotation],()=>this.updateMatrix())),this.disposers.push(XE.MVVM.watch(()=>({gravity:this.gravity}),()=>{this._particleSystem.updateCallback=this.updateGravity(this.gravity)})),this.disposers.push(XE.MVVM.watch(()=>({emitterRadius:this.emitterRadius,emitterAngle:this.emitterAngle,emitterType:this.emitterType}),()=>this.updateEmitter()))}updateMatrix(){let e=new Cesium.Cartesian3,t=new Cesium.Matrix4;Cesium.Cartesian3.fromRadians(...this.position,null,e),this._modelMatrix=Cesium.Transforms.eastNorthUpToFixedFrame(e);let i=new Cesium.HeadingPitchRoll(...this.rotation),s=Cesium.Quaternion.fromHeadingPitchRoll(i,new Cesium.Quaternion);t=Cesium.Matrix4.fromTranslationQuaternionRotationScale(Cesium.Cartesian3.ZERO,s,new Cesium.Cartesian3(1,1,1),t),Cesium.Matrix4.multiply(this._modelMatrix,t,this._modelMatrix),this._particleSystem.modelMatrix=this._modelMatrix}updateParticleSize(){this._particleSystem.imageSize?(this._particleSystem.imageSize.x=this.particleSize,this._particleSystem.imageSize.y=this.particleSize,this._particleSystem.maximumImageSize.x=this.particleSize,this._particleSystem.maximumImageSize.y=this.particleSize,this._particleSystem.minimumImageSize.x=this.particleSize,this._particleSystem.minimumImageSize.y=this.particleSize):this._particleSystem.imageSize=new Cesium.Cartesian2(this.particleSize,this.particleSize)}updateParticleSystem(){this._particleSystem&&(this._viewer.scene.primitives.remove(this._particleSystem),this._particleSystem=void 0),this._particleSystem=new Cesium.ParticleSystem({image:this.image,startColor:{red:this.startColor[0],green:this.startColor[1],blue:this.startColor[2],alpha:this.startColor[3]},endColor:{red:this.endColor,green:this.endColor[1],blue:this.endColor[2],alpha:this.endColor[3]},startScale:this.startScale,endScale:this.endScale,minimumParticleLife:this.minimumParticleLife,maximumParticleLife:this.maximumParticleLife,minimumSpeed:this.minimumSpeed,maximumSpeed:this.maximumSpeed,imageSize:new Cesium.Cartesian2(this.particleSize,this.particleSize),emissionRate:this.emissionRate,lifetime:16,modelMatrix:this._modelMatrix,emitterModelMatrix:Cesium.Matrix4.IDENTITY,emitter:this._emitter,updateCallback:this._updateCallback}),this._viewer.scene.primitives.add(this._particleSystem)}update(){this._particleSystem.startColor={red:this.startColor[0],green:this.startColor[1],blue:this.startColor[2],alpha:this.startColor[3]},this._particleSystem.endColor={red:this.endColor,green:this.endColor[1],blue:this.endColor[2],alpha:this.endColor[3]},this._particleSystem.startScale=this.startScale,this._particleSystem.endScale=this.endScale,this._particleSystem.emissionRate=this.emissionRate,this._particleSystem.minimumSpeed=this.minimumSpeed,this._particleSystem.maximumSpeed=this.maximumSpeed,this._particleSystem.minimumParticleLife=this.minimumParticleLife,this._particleSystem.maximumParticleLife=this.maximumParticleLife}updateGravity(e){return this._updateCallback=(t,i)=>{Cesium.Cartesian3.normalize(t.position,c),Cesium.Cartesian3.multiplyByScalar(c,e*i,c),t.velocity=Cesium.Cartesian3.add(t.velocity,c,t.velocity)}}updateEmitter(){let e;if(e="BoxEmitter"!=this.emitterType?"ConeEmitter"==this.emitterType?this.emitterAngle:this.emitterRadius:new Cesium.Cartesian3(...new Array(3).fill(this.emitterRadius)),!this._particleSystem)return this._emitter=new Cesium[this.emitterType](e),this._emitter;this._particleSystem.emitter=new Cesium[this.emitterType](e),this._emitter=this._particleSystem.emitter}flyTo(){if(this._particleSystem){let e=Math.abs(this._particleSystem.minimumSpeed)>Math.abs(this._particleSystem.maximumSpeed)?Math.abs(this._particleSystem.minimumSpeed):Math.abs(this._particleSystem.maximumSpeed),t=Math.abs(this._particleSystem.minimumParticleLife)>Math.abs(this._particleSystem.maximumParticleLife)?Math.abs(this._particleSystem.minimumParticleLife):Math.abs(this._particleSystem.maximumParticleLife),i=new Cesium.Cartesian3;Cesium.Matrix4.getColumn(particleSystem._particleSystem.modelMatrix,3,i);let s=e*t,r=new Cesium.BoundingSphere(i,s);this._viewer.camera.flyToBoundingSphere(r,{duration:2})}}destroy(){this._particleSystem&&(this._viewer.scene.primitives.remove(this._particleSystem),this._particleSystem=void 0)}}p.defaultOptions={startColor:[.12549,.69804,.66667,.7],endColor:[1,1,1,0],position:[1.6988083400554626,.6666896940162155,0],rotation:[0,0,0],emissionRate:5,gravity:0,minimumParticleLife:2,maximumParticleLife:2,minimumSpeed:1,maximumSpeed:4,startScale:1,endScale:5,particleSize:25,image:"../../XbsjEarth-Plugins/plottingSymbol2/assets/SampleData/smoke.png",emitterRadius:2,emitterAngle:1,emitterType:"CircleEmitter"},p.registerType(p,"ParticleSystem");var d=p;new Cesium.Cartesian3;XE.Tool;class m extends XE.Core.XbsjCzmObj{constructor(e,t){super(e,t),this.disposers.push(XE.Earth.Interaction.InteractionProperty.registerPositionEditing(this._earth,this,{positionEditingProperty:"editing"})),this.disposers.push(XE.Earth.Interaction.InteractionProperty.registerPositionPicking(this._earth,this,{positionPickingProperty:"creating"})),this._viewer=e.czm.viewer,this._modelMatrix=this._modelMatrix||Cesium.Matrix4.IDENTITY,this._position=new Cesium.Cartesian3,this._particleSystem=new Cesium.ParticleSystem({image:y(),startColor:{red:this.startColor[0],green:this.startColor[1],blue:this.startColor[2],alpha:this.startColor[3]},endColor:{red:this.endColor[0],green:this.endColor[1],blue:this.endColor[2],alpha:0},particleLife:this.particleLife,speed:this.radius/this.particleLife||0,imageSize:new Cesium.Cartesian2(7,7),bursts:[new Cesium.ParticleBurst({time:0,minimum:400,maximum:400})],emissionRate:0,lifetime:this.particleLife+this.burstInterval||2,modelMatrix:this._modelMatrix,emitter:new Cesium.SphereEmitter(.1)}),this._viewer.scene.primitives.add(this._particleSystem),this.disposers.push(XE.MVVM.watch(()=>({startColor:[...this.startColor],endColor:[...this.endColor]}),()=>this.updateColor())),this.disposers.push(XE.MVVM.watch(()=>({radius:this.radius,particleLife:this.particleLife,burstInterval:this.burstInterval}),()=>this.updateInitialVelocity())),this.disposers.push(XE.MVVM.watch(()=>({position:[...this.position]}),()=>this.updateModelMatrix())),this.flyTo()}updateColor(){this._particleSystem.startColor={red:this.startColor[0],green:this.startColor[1],blue:this.startColor[2],alpha:this.startColor[3]},this._particleSystem.endColor={red:this.endColor[0],green:this.endColor[1],blue:this.endColor[2],alpha:0}}updateModelMatrix(){Cesium.Cartesian3.fromRadians(...this.position,null,this._position),this._modelMatrix=Cesium.Transforms.eastNorthUpToFixedFrame(this._position),this._particleSystem.modelMatrix=this._modelMatrix}updateInitialVelocity(){this._initialVelocity=this.radius/this.particleLife,this._particleSystem.lifetime=this.particleLife+this.burstInterval,this._particleSystem.minimumParticleLife=this.particleLife,this._particleSystem.maximumParticleLife=this.particleLife,this._particleSystem.minimumSpeed=this._initialVelocity,this._particleSystem.maximumSpeed=this._initialVelocity}flyTo(){this.boundingSphere=new Cesium.BoundingSphere(this._position,this.radius),this._viewer.camera.flyToBoundingSphere(this.boundingSphere,{duration:2})}destroy(){this._particleSystem&&(this._viewer.scene.primitives.remove(this._particleSystem),this._particleSystem=void 0)}}m.defaultOptions={radius:200,particleLife:.8,burstInterval:1,startColor:[.75,0,.8,1],endColor:[.75,0,.8],position:[1.7,.6666896940162155,0]};var u=m;let f;function y(){if(!Cesium.defined(f)){f=document.createElement("canvas"),f.width=20,f.height=20;var e=f.getContext("2d");e.beginPath(),e.arc(8,8,8,0,Cesium.Math.TWO_PI,!0),e.closePath(),e.fillStyle="rgb(255, 255, 255)",e.fill()}return f}const g=XE.Tool;class S extends r{constructor(e,t){super(e,t),this._pgPositions=[],this.disposers.push(XE.MVVM.watch(()=>[...this.positions.map(e=>[...e])],e=>{const t=e.length;if(t<=2)return;this._pgPositions.length=0;let i=[];e.forEach(e=>{i.push(e)}),g.Math.interpolatePositions(i,20*(t+1)-1,!0,[]).forEach(e=>{this._pgPositions.push(e[0],e[1])}),this._polygon.positions=this._pgPositions,this._polygon.height=e[0][2]}))}}S.registerType(S,"GeoSmoothPolygon");var _=S;XE.Obj.Plots=XE.Obj.Plots||{},XE.Obj.Plots.GeoArrow=n,XE.Obj.Plots.ParticleSystem=d,XE.Obj.Plots.GeoSmoothPolygon=_,XE.Obj.Plots.ParticleSystemFireWork=u}]);
//# sourceMappingURL=plottingSymbol2.js.map